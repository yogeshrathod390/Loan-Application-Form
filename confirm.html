<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>confirm Page</title>
    <link href="ConfirmStyle.css" rel="stylesheet">
    
</head>
    
<body>
    
    <div class="container1">
        
 <p>
     
Dear
     
<span id="name1"></span>,  <br><br><br>
     
Thank You for your inquiry. A4 digit verification number has been sent to your emai:    
<span id="email"></span>  
.Please enter it in the following box and submit for confirmation: <span class="Hint">(Check OTP in console)</span><br><br>
<input type="text" name="otp" id="otp"/>  <br>
<h5 id="validate">validate</h5>  <br><br>
<button onclick="varify()" class="button">Varify</button>
        
 </p>

    </div>
    
    <script>
        
        let name = document.getElementById("name1");
        let email = document.getElementById("email");
        let otp = document.getElementById("otp");
        let validate = document.getElementById("validate");
        
        let pin;
        let generate = () => {
            pin = parseInt(Math.random()*(9999 - 1000) + 1000);
        }
        
        window.onload = () => {
            
            generate();
            
            console.log("OTP: ", pin)
            
            var data = localStorage.getItem("inputData");
            
            if (data != null){
                
                array1 = JSON.parse(data);
                
                let{name: N, email: E} = array1[0]

                //console.log(N,E);
                name.innerHTML = N;
                email.innerHTML = E;
                
            }

        }

        let counter = 0;
            function varify() {
                // console.log("calle")
            
                if (otp.value == pin) {
                 
                    validate.style.color = "green";
                    validate.innerHTML = "Validation Successful!";

                } else {
                    validate.style.color = "red";
                    validate.innerHTML = "Validation Failed!";
                    counter+=1;
                    otp.value=""
               
                   
                }

        
                console.log(counter)
                if (counter == 3) {
                    gentate();
                    console.log("NEW-OTP :", pin)
                    // console.log("call counter")
                    counter=0
                }
                
            }
    
    </script>
</body>
</html>
